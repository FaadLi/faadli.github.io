<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mz Fadli</title>

    <link rel="stylesheet" href="assets/bootstrap-5.0.0-beta3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/custom.css">
</head>



<body class="full container-fluid">

    <div id="port1">



        <!-- https://www.codeply.com/p/P0KN7DNsEq -->


        <nav class="navbar fixed-top navbar-expand-lg navbar-dark header">
            <div class="container-fluid text-center">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link m-3" aria-current="page" href="resume.html">Resume</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active m-3 " href="portfolio.html">Portofolio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link disabled m-3" href="#" tabindex="-1" aria-disabled="true">Blog</a>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-outline-success m-3" type="button">Contact</button>
                        </li>
                    </ul>
                </div>

            </div>
        </nav>


        <div class="flex-nowrap">
            <div style="text-align: center; font-family: sans-serif; width: 280px; margin: 240px auto;">
                <h1 class=""> Resume </h1>

                <p><a href="index.html">Home</a> / <a href="#">Portofolio</a></p>
                <br><br>
                <br><br>

            </div>
        </div>

        <hr>

        <div class="row container-fluid" style="margin-bottom: 100px;">

            <div class="row" style="padding-bottom: 100px;">

                <a class="col-1" href="#"></a>
                <a class="col-12 col-md-1 col-sm-12 mb-1 active" href="#">Semua</a>
                <a class="col-12 col-md-1 col-sm-12 mb-1" href="#">Website</a>
                <a class="col-12 col-md-1 col-sm-12 mb-1" href="#">Mobile</a>
                <a class="col-12 col-md-1 col-sm-12 mb-1" href="#">Desktop</a>
                <a class="col" href="#"></a>
            </div>


            <!-- <div id="detail" class="col-sm-7 col-md-5 col-lg-4 mb-4 pimg ">
                <a class="" href="#">

                    <img src="image/portofolio/stroomnet.png" class="rounded " alt="Cinque Terre" width="304" height="236">
                    <span class="txtimg"> project 1</span>
                </a>
            </div> -->


        </div>
        <div id="posts" class="row container-fluid" style="margin-bottom: 100px;"></div>
        <pre id="content" style="white-space: pre-wrap;"></pre>





        <!-- <nav class="navbar fixed-bottom navbar-dark footer">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Fixed bottom</a>
            </div>
        </nav> -->
        <!-- <nav class="navbar fixed-bottom navbar-light footer2">
            <div class="container-fluid">
            </div>
        </nav> -->

        <nav class="navbar navbar-expand-lg fixed-bottom navbar-dark footer">
            <div class="container-fluid">
                <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item active">
                            <div class="copy" style="font-size: 10px;">
                                Â© 2021 FaadLi
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="navbar-collapse w-100 order-3 dual-collapse2">
                    <ul class="navbar-nav ms-auto  text-center">

                        <li class="nav-item">
                            <div class="row">
                                <div class="col"></div>
                                <a class="nav-link col-2" href="#">
                                    <svg id="i-github" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="16" height="32">
                                        <path stroke-width="0" fill="currentColor" d="M32 0 C14 0 0 14 0 32 0 53 19 62 22 62 24 62 24 61 24 60 L24 55 C17 57 14 53 13 50 13 50 13 49 11 47 10 46 6 44 10 44 13 44 15 48 15 48 18 52 22 51 24 50 24 48 26 46 26 46 18 45 12 42 12 31 12 27 13 24 15 22 15 22 13 18 15 13 15 13 20 13 24 17 27 15 37 15 40 17 44 13 49 13 49 13 51 20 49 22 49 22 51 24 52 27 52 31 52 42 45 45 38 46 39 47 40 49 40 52 L40 60 C40 61 40 62 42 62 45 62 64 53 64 32 64 14 50 0 32 0 Z" />
                                    </svg>
                                </a>
                                <a class="nav-link col-2" href="#">
                                    <svg id="i-twitter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="16" height="32">
                                        <path stroke-width="0" fill="currentColor" d="M60 16 L54 17 L58 12 L51 14 C42 4 28 15 32 24 C16 24 8 12 8 12 C8 12 2 21 12 28 L6 26 C6 32 10 36 17 38 L10 38 C14 46 21 46 21 46 C21 46 15 51 4 51 C37 67 57 37 54 21 Z" />
                                    </svg>
                                </a>
                                <div class="col"></div>
                            </div>
                        </li>
                        <li class="nav-item">
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

    </div>

    <div id="port2" style="display: none;">

        <a id="backPort" href="#">back</a>
        <h1>Detail Portfolio </h1>
    </div>



    <script type="text/javascript">
        // Client ID and API key from the Developer Console
        var CLIENT_ID = '217285195043-mooruon9p2mmfshvtktej12aei8tnofu.apps.googleusercontent.com';
        var API_KEY = 'AIzaSyAGeYoHcxkt9gOQTq6IZrp9msoPiVJwyeQ';

        // Array of API discovery doc URLs for APIs used by the quickstart
        var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];

        // Authorization scopes required by the API; multiple scopes can be
        // included, separated by spaces.
        var SCOPES = "https://www.googleapis.com/auth/spreadsheets.readonly";

        /**
         *  On load, called to load the auth2 library and API client library.
         */
        function handleClientLoad() {
            gapi.load('client', initClient);
        }

        /**
         *  Initializes the API client library and sets up sign-in state
         *  listeners.
         */
        function initClient() {
            gapi.client.init({
                apiKey: API_KEY,
                clientId: CLIENT_ID,
                discoveryDocs: DISCOVERY_DOCS,
                scope: SCOPES
            }).then(function() {
                listMajors();
            }, function(error) {
                appendPre(JSON.stringify(error, null, 2));
            });
        }

        /**
         * Append a pre element to the body containing the given message
         * as its text node. Used to display the results of the API call.
         *
         * @param {string} message Text to be placed in pre element.
         */
        function appendPre(message) {
            var pre = document.getElementById('content');
            var textContent = document.createTextNode(message + '\n');
            pre.appendChild(textContent);
        }

        function content(dataArr) {
            console.log("data Masuk");
            console.log(dataArr);

            dataArr.forEach(data => {
                console.log(data.tanggal);

                var tanggal = data.tanggal,
                    judul = data.judul,
                    isi = data.konten;
                image = data.image;
                type = data.type;
                var div = document.createElement('div');
                div.setAttribute('id', 'detail')
                div.setAttribute('class', 'col-md-5 col-lg-4 mb-4 pimg');
                div.setAttribute('style', 'padding-bottom: 100px;')
                    // div.innerHTML = `
                    //     <a class="" href="#">

                //         <img src="${image}" class="rounded " alt="Cinque Terre" width="304" height="236">
                //         <span class="txtimg"> ${judul}</span>

                //     </a>
                //     `;
                div.innerHTML = `
                    <a href="#">
                        <img src="${image}" class="card-img-top" alt="...">
                        <p class="card-text"><small class="text-muted">${type}</small></p>
                        <h5 class="card-title">${judul}</h5>
                    </a>
                    `;



                document.getElementById('posts').appendChild(div);
            });
        }

        //  https://docs.google.com/spreadsheets/d/1R25qid1fLEcFVlWoiODVrCrMr_MOx4Pz8ecN5W67FNk/edit?usp=sharing
        function listMajors() {
            gapi.client.sheets.spreadsheets.values.get({
                spreadsheetId: '1R25qid1fLEcFVlWoiODVrCrMr_MOx4Pz8ecN5W67FNk',
                range: 'Portfolio',
            }).then(function(response) {
                    var range = response.result;
                    console.log(range);
                    // if (range.values.length > 0) {
                    //     for (i = 0; i < range.values.length; i++) {
                    //         var row = range.values[i];
                    //         console.log(row);
                    //         // Print columns A and E, which correspond to indices 0 and 4.
                    //         appendPre(row[0] + ', ' + row[2]);
                    //         appendPreJudul(row[1] + row[1] + row[1] + row[1] + row[1]);
                    //     }
                    // } else {
                    //     appendPre('No data found.');
                    // }


                    const dataku = range.values;
                    let header = [];
                    let datanasabah = [];
                    for (let row = 0; row < dataku.length; row++) {

                        // 
                        if (row == 0) {
                            header = dataku[row];
                        } else {
                            //cek tanggal DULU
                            const now = new Date();
                            var str = dataku[row][0].substring(0, 10);
                            var dtarr = str.split("/");
                            var datee = new Date(dtarr[2].trim() + "-" + dtarr[1].trim() + "-" + dtarr[0].trim());
                            // Hitung selisih Hari
                            const diffTime = Math.abs(datee - now);
                            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                            // if (diffDays == 2) {
                            //bukan baris pertama
                            var datnas = {};
                            for (let col = 0; col < dataku[0].length; col++) {
                                if (col == 0) {
                                    datnas[header[col]] = datee.toLocaleDateString('en-CA');
                                } else if (col == 8) {
                                    datnas["Kabupaten"] = dataku[row][col];

                                } else {
                                    // console.log(col+" : "+header[col].replace(/ /gi, ""));
                                    datnas[header[col].replace(/ /gi, "")] = dataku[row][col];
                                }
                            }
                            datanasabah.push(datnas);
                            // }
                        }
                    }

                    console.log("Datanasabah");
                    // console.log(datanasabah);
                    content(datanasabah);


                },
                function(response) {
                    appendPre('Error: ' + response.result.error.message);
                });
        }
    </script>

    <script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>



    <script src="assets/bootstrap-5.0.0-beta3-dist/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        // pindah ke detail portfolio
        document.getElementById("detail").addEventListener("click", detail);
        document.getElementById("backPort").addEventListener("click", backPort);

        // fungsi jika klik id detail
        function detail() {
            document.getElementById("port1").style.display = "none";
            document.getElementById("port2").style.display = "block";
        }
        //  fungsi jika klik id backPort
        function backPort() {
            document.getElementById("port1").style.display = "block";
            document.getElementById("port2").style.display = "none";
        }
    </script>

</body>

</html>